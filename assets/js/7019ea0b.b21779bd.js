"use strict";(self.webpackChunkmegajs_docs=self.webpackChunkmegajs_docs||[]).push([[228],{6767:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var r=t(4848),o=t(8453),a=t(2267);const s="import { Storage } from 'megajs'\n\nconst storage = new Storage({\n  email: 'user@example.com',\n  password: 'correct horse battery example'\n})\n\nstorage.once('ready', () => {\n  // User is now logged in\n})\n\nstorage.once('error', error => {\n  // Some error happened\n})\n",i={sidebar_position:3},l="Logging in",u={id:"tutorial/login",title:"Logging in",description:"To log in to an account use the Storage class:",source:"@site/versioned_docs/version-0.17/tutorial/login.md",sourceDirName:"tutorial",slug:"/tutorial/login",permalink:"/docs/0.17/tutorial/login",draft:!1,unlisted:!1,editUrl:"https://github.com/qgustavor/megajs-docs/tree/main/versioned_docs/version-0.17/tutorial/login.md",tags:[],version:"0.17",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installing",permalink:"/docs/0.17/tutorial/install"},next:{title:"Uploading files",permalink:"/docs/0.17/tutorial/uploading"}},c={},d=[];function m(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"logging-in",children:"Logging in"}),"\n",(0,r.jsxs)(n.p,{children:["To log in to an account use the ",(0,r.jsx)(n.code,{children:"Storage"})," class:"]}),"\n","\n",(0,r.jsx)(a.A,{language:"js",code:s}),"\n",(0,r.jsx)(n.p,{children:"It may look weird to pass a callback to a constructor, but that's an option too:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const storage = new Storage({\n  email: 'user@example.com',\n  password: 'correct horse battery example'\n}, error => {\n  if (error) {\n    // Some error happened\n  } else {\n    // User is now logged in\n  }\n})\n"})}),"\n",(0,r.jsxs)(n.p,{children:["While is recommended to set up an user-agent before logging-in, in V0 the steps for doing so are a bit complicated. You can either switch to V1 or read more about it in the ",(0,r.jsx)(n.a,{href:"/docs/0.17/tutorial/advanced",children:"advanced usage page"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsxs)(n.p,{children:["If you are migrating from ",(0,r.jsx)(n.a,{href:"https://github.com/tonistiigi/mega",children:"tonistiigi's mega"})," you can still use the following code:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const mega = require('megajs')\n\nconst storage = mega({\n  email: 'user@example.com',\n  password: 'correct horse battery example'\n}, error => {\n  if (error) {\n    // Some error happened\n  } else {\n    // User is now logged in\n  }\n})\n"})}),(0,r.jsx)(n.p,{children:"But this pattern might not be supported in future versions because it is not compatible with ES modules and causes issues with tree shaking, which is important when this using this library in a browser environment."})]}),"\n",(0,r.jsxs)(n.p,{children:["In the next part of this tutorial we will use the ",(0,r.jsx)(n.code,{children:"storage"})," object to upload a file."]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>s});t(6540);var r=t(4164);const o={tabItem:"tabItem_Ymn6"};var a=t(4848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,s),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>y});var r=t(6540),o=t(4164),a=t(3104),s=t(6347),i=t(205),l=t(7485),u=t(1682),c=t(9466);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:o}}=e;return{value:n,label:t,attributes:r,default:o}}))}(t);return function(e){const n=(0,u.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const o=(0,s.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(o.location.search);n.set(a,e),o.replace({...o.location,search:n.toString()})}),[a,o])]}function h(e){const{defaultValue:n,queryString:t=!1,groupId:o}=e,a=m(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:a}))),[u,d]=g({queryString:t,groupId:o}),[h,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[o,a]=(0,c.Dv)(t);return[o,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:o}),b=(()=>{const e=u??h;return p({value:e,tabValues:a})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,a]),tabValues:a}}var f=t(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(4848);function j(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:u}=(0,a.a_)(),c=e=>{const n=e.currentTarget,t=l.indexOf(n),o=i[t].value;o!==r&&(u(n),s(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:d,onClick:c,...a,className:(0,o.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function x(e){let{lazy:n,children:t,selectedValue:o}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==o})))})}function w(e){const n=h(e);return(0,v.jsxs)("div",{className:(0,o.A)("tabs-container",b.tabList),children:[(0,v.jsx)(j,{...n,...e}),(0,v.jsx)(x,{...n,...e})]})}function y(e){const n=(0,f.A)();return(0,v.jsx)(w,{...e,children:d(e.children)},String(n))}},2267:(e,n,t)=>{t.d(n,{A:()=>d});t(6540);var r=t(1432),o=t(1470),a=t(9365);t(4586);const s=["Node ESM","Node CJS","Browser","Deno"],i=["node_esm","node_cjs","browser","deno"];function l(e,n){let t=!0,r=!1,o=!1;return e.split("\n").filter((e=>{const a=e.trim();if("// node2deno end"===a)t=!0,r=!1;else if("// node2deno else"===a)t=!r;else if(a.startsWith("// node2deno else if: ")){if(!r){const e=a.slice(22).trim().split(" ");t=e.includes(n),t&&(r=!0)}}else if(a.startsWith("// node2deno single: ")){const e=a.slice(21).trim().split(" ");t=e.includes(n),o=!0}else if(a.startsWith("// node2deno: ")){const e=a.slice(14).trim().split(" ");t=e.includes(n),t&&(r=!0)}else{if(t)return o=!1,!0;o&&(o=!1,t=!0)}return!1})).join("\n")}const u=[e=>l(e,"node"),e=>((e=l(e,"node").replace(/import (.+?) from 'megajs'/g,"const $1 = require('megajs')")).includes("await ")&&(e=e.replace(/^(?!import|$)/gm,"  ").replace(/^\s*$/m,"\n// Node doesn't support top-level await when using CJS\n;(async function () {").replace(/\n*$/,"\n}()).catch(error => {\n  console.error(error)\n  process.exit(1)\n})\n")),e),e=>l(e,"browser").replace(/import (.+?) from 'megajs'/g,"import $1 from 'https://unpkg.com/megajs/dist/main.browser-es.mjs'"),e=>l(e,"deno").replace(/import (.+?) from 'megajs'/g,"import $1 from 'npm:megajs'")];var c=t(4848);function d(e){return(0,c.jsx)("div",{children:(0,c.jsx)(o.A,{groupId:"node2deno",className:"margin-bottom--sm",children:s.map(((n,t)=>(0,c.jsx)(a.A,{value:i[t],label:n,children:(0,c.jsx)(r.A,{language:e.language,children:u[t](e.code)})},i[t])))})})}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var r=t(6540);const o={},a=r.createContext(o);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);