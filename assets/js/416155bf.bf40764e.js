"use strict";(self.webpackChunkmegajs_docs=self.webpackChunkmegajs_docs||[]).push([[147],{6080:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var i=l(4848),s=l(8453),r=l(2267);const t={sidebar_position:2},o="API Reference",a={id:"api",title:"API Reference",description:"Entry point",source:"@site/versioned_docs/version-0.17/api.md",sourceDirName:".",slug:"/api",permalink:"/docs/0.17/api",draft:!1,unlisted:!1,editUrl:"https://github.com/qgustavor/megajs-docs/tree/main/versioned_docs/version-0.17/api.md",tags:[],version:"0.17",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Security",permalink:"/docs/0.17/tutorial/security"}},d={},c=[{value:"Entry point",id:"entry-point",level:2},{value:"Storage",id:"storage",level:2},{value:"Creation",id:"creation",level:3},{value:"Options",id:"options",level:3},{value:"Properties",id:"properties",level:3},{value:"Methods",id:"methods",level:3},{value:"<code>.reload(cb)</code>",id:"reloadcb",level:4},{value:"<code>.login(cb)</code>",id:"logincb",level:4},{value:"<code>.getAccountInfo(cb)</code>",id:"getaccountinfocb",level:4},{value:"<code>.close()</code>",id:"close",level:4},{value:"Events",id:"events",level:3},{value:"File",id:"file",level:2},{value:"Creation",id:"creation-1",level:3},{value:"Options",id:"options-1",level:3},{value:"Properties",id:"properties-1",level:3},{value:"Methods",id:"methods-1",level:3},{value:"<code>.loadAttributes(callback)</code>",id:"loadattributescallback",level:4},{value:"<code>.download([options], [callback])</code>",id:"downloadoptions-callback",level:4},{value:"Mutable File",id:"mutable-file",level:2},{value:"Basic syntax",id:"basic-syntax",level:3},{value:"Methods",id:"methods-2",level:3},{value:"<code>.upload(options | name, [data], [callback])</code>",id:"uploadoptions--name-data-callback",level:4},{value:"<code>.mkdir(options | name, callback)</code>",id:"mkdiroptions--name-callback",level:4},{value:"<code>.importFile(File | URL, callback)</code>",id:"importfilefile--url-callback",level:4},{value:"<code>.link([options], callback)</code> / <code>.shareFolder([options], callback)</code>",id:"linkoptions-callback--sharefolderoptions-callback",level:4},{value:"<code>.delete(permanent, callback)</code>",id:"deletepermanent-callback",level:4},{value:"<code>.moveTo(target, callback)</code>",id:"movetotarget-callback",level:4},{value:"<code>.setAttributes(attributes, callback)</code>",id:"setattributesattributes-callback",level:4},{value:"<code>.uploadAttribute(type, [buffer|stream], [callback])</code>",id:"uploadattributetype-bufferstream-callback",level:4},{value:"<code>.rename(newFileName, callback)</code>",id:"renamenewfilename-callback",level:4},{value:"<code>.setLabel(label, callback)</code>",id:"setlabellabel-callback",level:4},{value:"<code>.setFavorite(isFavorite, callback)</code>",id:"setfavoriteisfavorite-callback",level:4},{value:"Events",id:"events-1",level:3},{value:"Low level functions",id:"low-level-functions",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"api-reference",children:"API Reference"}),"\n",(0,i.jsx)(n.h2,{id:"entry-point",children:"Entry point"}),"\n",(0,i.jsx)(n.p,{children:"The exported classes and functions are those below:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Storage"})," class"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"File"})," class"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"file"}),": alias to ",(0,i.jsx)(n.code,{children:"File.fromURL"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"encrypt"})," and ",(0,i.jsx)(n.code,{children:"decrypt"})," (low level encryption streams)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"storage",children:"Storage"}),"\n",(0,i.jsx)(n.p,{children:"Creates a logged in connection instance to MEGA."}),"\n",(0,i.jsx)(n.h3,{id:"creation",children:"Creation"}),"\n","\n",(0,i.jsx)(r.A,{language:"js",code:"import { Storage } from 'megajs'\nconst storage = new Storage(options, [callback])"}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"email"})," - User login email."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"password"})," - User password."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"keepalive"})," - Keep connection open to receive server-to-client requests that will be mapped to events. Defaults to ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"autologin"})," - Logins to MEGA. Defaults to ",(0,i.jsx)(n.code,{children:"true"}),". Set to ",(0,i.jsx)(n.code,{children:"false"})," if you want to change request options, like proxy, ",(0,i.jsx)(n.a,{href:"/docs/0.17/tutorial/advanced#setting-request-configuration",children:"like shown here"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"autoload"})," - Load in file structure. Defaults to ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Temporary accounts aren't supported. Trying to login without an email or password will throw an error."}),"\n",(0,i.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,i.jsxs)(n.p,{children:["Only loaded after ",(0,i.jsx)(n.code,{children:"readyCallback()"})," or ",(0,i.jsx)(n.code,{children:"ready"})," event fires."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," - Account owner name"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"})," - Account master key"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sid"})," - Current session ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"files"})," - Hash of ",(0,i.jsx)(n.code,{children:"MutableFile"})," objects by node IDs."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"root"})," - ",(0,i.jsx)(n.code,{children:"MutableFile"})," object for Cloud Drive main directory"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"trash"})," - ",(0,i.jsx)(n.code,{children:"MutableFile"})," object for Rubbish bin"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inbox"})," - ",(0,i.jsx)(n.code,{children:"MutableFile"})," object for Inbox"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mounts"})," - Array of all top level directories"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:".upload"})," and ",(0,i.jsx)(n.code,{children:".mkdir"})," methods maps to ",(0,i.jsx)(n.code,{children:"storage.root.upload"})," and ",(0,i.jsx)(n.code,{children:"storage.root.mkdir"})," methods."]}),"\n",(0,i.jsx)(n.h4,{id:"reloadcb",children:(0,i.jsx)(n.code,{children:".reload(cb)"})}),"\n",(0,i.jsxs)(n.p,{children:["Reloads files tree. No need to call this if ",(0,i.jsx)(n.code,{children:"autoload"})," is used."]}),"\n",(0,i.jsx)(n.h4,{id:"logincb",children:(0,i.jsx)(n.code,{children:".login(cb)"})}),"\n",(0,i.jsxs)(n.p,{children:["Logins to MEGA. No need to call this if ",(0,i.jsx)(n.code,{children:"autologin"})," is used."]}),"\n",(0,i.jsx)(n.h4,{id:"getaccountinfocb",children:(0,i.jsx)(n.code,{children:".getAccountInfo(cb)"})}),"\n",(0,i.jsx)(n.p,{children:"Get info related to account and quota usage. It returns a object with the following properties:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"type"}),": the account type"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spaceUsed"}),": the space used by the account, in bytes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"spaceTotal"}),": the total space available, in bytes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"downloadBandwidthUsed"}),": the bandwidth quota used, in bytes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"downloadBandwidthTotal"}),": the total bandwidth quota available, in bytes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sharedBandwidthUsed"}),": the shared bandwidth quota used, in bytes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sharedBandwidthLimit"}),": the total shared bandwidth quota available, in bytes"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"close",children:(0,i.jsx)(n.code,{children:".close()"})}),"\n",(0,i.jsx)(n.p,{children:"Closes server-to-client connection. Other connections will not be closed. Attempting to call API requests after this point will result in errors. It will not log out from MEGA."}),"\n",(0,i.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["These events fire on file changes when ",(0,i.jsx)(n.code,{children:"keepalive"})," is used. The changes can be triggered from any session connected to the same account."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"add"})," - New file/dir was added. Parameters: file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"move"})," - File was moved to another dir. Parameters: file, olddir."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"delete"})," - File was deleted. Parameters: file."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"update"})," - File was changed(renamed). Parameters: file."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"file",children:"File"}),"\n",(0,i.jsxs)(n.p,{children:["Basic class that handle files and folders. Often used to handle ",(0,i.jsx)(n.strong,{children:"shared"})," files and folders."]}),"\n",(0,i.jsx)(n.h3,{id:"creation-1",children:"Creation"}),"\n",(0,i.jsx)(r.A,{language:"js",code:"import { File } from 'megajs'\nconst file = File.fromURL(url)"}),"\n",(0,i.jsx)(n.h3,{id:"options-1",children:"Options"}),"\n",(0,i.jsxs)(n.p,{children:["If a string is passed it needs to be a shared MEGA url. It can be a ",(0,i.jsx)(n.code,{children:"https://mega.co.nz"})," or a ",(0,i.jsx)(n.code,{children:"https://mega.nz"})," file. The new URL format with ",(0,i.jsx)(n.code,{children:"/file/"})," or ",(0,i.jsx)(n.code,{children:"/folder/"})," is also supported."]}),"\n",(0,i.jsx)(n.p,{children:"If an object is passed it needs to have the options below:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"downloadId"}),": ",(0,i.jsx)(n.code,{children:"https://mega.nz/#!THIS_PART!..."})," of the share link; a string"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"}),": ",(0,i.jsx)(n.code,{children:"https://mega.nz/#!...!THIS_PART"})," of the share link; string or a Buffer; optional"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"directory"}),": ",(0,i.jsx)(n.code,{children:"true"})," if loading a shared folder"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"properties-1",children:"Properties"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"})," - File name*"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"attributes"})," - Object of attributes*"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"size"})," - File size"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"})," - File key (buffer)*"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"timestamp"})," - File creation time (unix timestamp in seconds)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodeId"})," - File ID"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"downloadId"})," - Link ID to file. Only if created from link."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"directory"})," - Boolean if file is directory."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"children"})," - Array of files for directories."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Values marked with * are ",(0,i.jsx)(n.code,{children:"null"})," or ",(0,i.jsx)(n.code,{children:"undefined"})," when an encryption key isn't specified. An encryption key isn't specified when someone loads a shared file without specifying the encryption key like ",(0,i.jsx)(n.code,{children:"File.fromURL('https://mega.nz/file/something')"})," without the ",(0,i.jsx)(n.code,{children:"#random-string"})," part. Files loaded from accounts always have keys defined."]}),"\n",(0,i.jsx)(n.h3,{id:"methods-1",children:"Methods"}),"\n",(0,i.jsx)(n.h4,{id:"loadattributescallback",children:(0,i.jsx)(n.code,{children:".loadAttributes(callback)"})}),"\n",(0,i.jsxs)(n.p,{children:["Load and decrypt file attributes. Attributes normally contain file name (",(0,i.jsx)(n.code,{children:"'n'"}),") but is possible to put anything there, as long it can be encoded as JSON. Isn't needed for files loaded from logged sessions. Trying to call it in a ",(0,i.jsx)(n.code,{children:"MutableFile"})," will throw an error."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.loadAttributes((err, file) => {\n  // now file properties were loaded\n})\n"})}),"\n",(0,i.jsx)(n.p,{children:"This function can be also be used to load file information contained in shared folders."}),"\n",(0,i.jsx)(n.h4,{id:"downloadoptions-callback",children:(0,i.jsx)(n.code,{children:".download([options], [callback])"})}),"\n",(0,i.jsx)(n.p,{children:"Download and decrypt file contents into a readable stream or, if a callback is specified, into a buffer."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.download().pipe(fs.createWriteStream('myfile.txt'))\n\nfile.download((err, data) => {\n  // data is buffer\n})\n"})}),"\n",(0,i.jsx)(n.p,{children:"This function downloads files using chunked multiple parallel connections to speed up downloading. Similar to the MEGA implementation it first loads a 128KB chunk, then a 256KB, increasing it until it reaches 1MB. You can use the options below to control that."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxConnections"}),": the number of parallel connections is defined (default: 4);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"initialChunkSize"}),": first chunk size, in bytes (default: 128KB);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"chunkSizeIncrement"}),": how many bytes to increment each time (default: 128KB);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxChunkSize"}),": maximum chunk size, in bytes (max 1MB);"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"returnCiphertext"}),": if ",(0,i.jsx)(n.code,{children:"true"})," the ciphertext will be returned, which can be decrypted later using ",(0,i.jsx)(n.code,{children:"decrypt"})," low level function."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The download function also support ",(0,i.jsx)(n.code,{children:"start"})," and ",(0,i.jsx)(n.code,{children:"end"})," options, like ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options",children:(0,i.jsx)(n.code,{children:"fs.createReadStream"})}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["You can get progress events from the ",(0,i.jsx)(n.code,{children:"progress"})," event which will contain the following properties:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bytesLoaded"}),": the number of bytes loaded;"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bytesTotal"}),": the total number of bytes of the file;"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"mutable-file",children:"Mutable File"}),"\n",(0,i.jsxs)(n.p,{children:["Extends ",(0,i.jsx)(n.code,{children:"File"})," adding methods that are only available when logged in."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Please note:"})," what are mutable are the attributes of the files and folders, ",(0,i.jsx)(n.strong,{children:"not"})," their contents, as this library don't support this yet."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-syntax",children:"Basic syntax"}),"\n",(0,i.jsxs)(n.p,{children:["Those objects can be only accessed when logged in and can only be accessed via the properties of the ",(0,i.jsx)(n.code,{children:"Storage"})," object."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"storage.root.children[0] // the first file in the root of the storage\n"})}),"\n",(0,i.jsx)(n.h3,{id:"methods-2",children:"Methods"}),"\n",(0,i.jsx)(n.h4,{id:"uploadoptions--name-data-callback",children:(0,i.jsx)(n.code,{children:".upload(options | name, [data], [callback])"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"fs.createReadStream('myfile.txt').pipe(folder.upload('myfile.txt'))\n\nfolder.upload('myfile.txt', 'Hello world!', (error, uploadedFile) => {})\n"})}),"\n",(0,i.jsx)(n.p,{children:"Upload a file to a folder."}),"\n",(0,i.jsxs)(n.p,{children:["To input data you can input a buffer, string or stream in the data argument or, as it returns a ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/stream.html",children:"stream"}),", pipe data into it. To handle upload completion or errors you can either use the callback, which will return either an error as its first argument or the uploaded file instance as its second, or, if you don't specify a callback, listen for ",(0,i.jsx)(n.code,{children:"complete"})," and ",(0,i.jsx)(n.code,{children:"error"})," events."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Supported options:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"name"}),": file name, ",(0,i.jsx)(n.em,{children:"required"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"attributes"}),": object of file attributes"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key"}),": encryption key, Buffer or string; 192 bit; because MAC verification part of it be different in final key"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"size"}),": file size."]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["MEGA's API needs final data length before uploading can start, streaming only fully works if you specify the size of your data. Otherwise it needs to first buffer your data to determine the size. Set this option as ",(0,i.jsx)(n.strong,{children:"always"})," as possible!"]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"thumbnailImage"}),": the Buffer or Stream of the thumbnail image"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"previewImage"}),": the Buffer or Stream of the preview image"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"maxConnections"}),": the number of parallel connections is defined (default: 4);"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"initialChunkSize"}),": first chunk size, in bytes (default: 128KB);"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"chunkSizeIncrement"}),": how many bytes to increment each time (default: 128KB);"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"maxChunkSize"}),": maximum chunk size, in bytes (max 1MB);"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Thumbnail images are 120px x 120px JPEG images with 70% quality. Preview images are JPEG images with a maximum width and height size of 1000px and 75% quality. Please use those settings to avoid breaking compatibility with other MEGA clients. This library don't generates neither preview or thumbnail images, only provides a way to uploading those."}),"\n",(0,i.jsxs)(n.p,{children:["Uploading data without encryption is supported and ",(0,i.jsx)(n.a,{href:"/docs/0.17/tutorial/advanced#uploading-without-encryption",children:"is documented here"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The upload stream is always returned even when a callback is specified. Standard events for ",(0,i.jsx)(n.a,{href:"https://nodejs.org/api/stream.html#stream_class_stream_writable",children:"Writable\nStreams"}),", like ",(0,i.jsx)(n.code,{children:"error"})," and ",(0,i.jsx)(n.code,{children:"finish"}),", and methods, like ",(0,i.jsx)(n.code,{children:".pipe()"})," and ",(0,i.jsx)(n.code,{children:".write()"}),", work normally."]}),"\n",(0,i.jsx)(n.h4,{id:"mkdiroptions--name-callback",children:(0,i.jsx)(n.code,{children:".mkdir(options | name, callback)"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"folder.mkdir('dirname', (err, file) => { ... })\n"})}),"\n",(0,i.jsx)(n.p,{children:"Create a new folder inside the current folder."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Supported options:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"}),": directory name, ",(0,i.jsx)(n.em,{children:"required"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"attributes"}),": object of file attributes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"}),": encryption key, Buffer or string; 128 bit; only used internally (when sharing folders other key is used)"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"importfilefile--url-callback",children:(0,i.jsx)(n.code,{children:".importFile(File | URL, callback)"})}),"\n",(0,i.jsxs)(n.p,{children:["Import a file to the specified folder. It accepts File objects (from ",(0,i.jsx)(n.code,{children:"new File"}),") or URLs of shared files."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"folder.importFile('https://mega.nz/#!...', (err, file) => {\n  // `file` is a instance of MutableFile\n})\n"})}),"\n",(0,i.jsxs)(n.h4,{id:"linkoptions-callback--sharefolderoptions-callback",children:[(0,i.jsx)(n.code,{children:".link([options], callback)"})," / ",(0,i.jsx)(n.code,{children:".shareFolder([options], callback)"})]}),"\n",(0,i.jsxs)(n.p,{children:["Make download link for a file or folder. ",(0,i.jsx)(n.code,{children:".shareFolder"})," only works for folders, ",(0,i.jsx)(n.code,{children:".link"})," works for both (but calls ",(0,i.jsx)(n.code,{children:".shareFolder"})," internally)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.link((err, url) => {\n  // url: https://mega.nz/#!downloadId!key\n})\n"})}),"\n",(0,i.jsx)(n.p,{children:"Supported options:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"noKey"}),": set ",(0,i.jsx)(n.code,{children:"true"})," to return a url without an encryption key"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"key"}),": only works for folders, encryption key, can be a string or buffer, 128 bit"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"deletepermanent-callback",children:(0,i.jsx)(n.code,{children:".delete(permanent, callback)"})}),"\n",(0,i.jsxs)(n.p,{children:["Delete file, permanently if ",(0,i.jsx)(n.code,{children:"permanent"})," is true, otherwise file is moved to rubbish bin."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.delete((err) => {\n  // file was moved to rubbish bin\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"movetotarget-callback",children:(0,i.jsx)(n.code,{children:".moveTo(target, callback)"})}),"\n",(0,i.jsx)(n.p,{children:"Move a file to target, which can be a folder object or it's nodeId."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.moveTo(storage.root, (err) => {\n  // file was moved to storage root\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"setattributesattributes-callback",children:(0,i.jsx)(n.code,{children:".setAttributes(attributes, callback)"})}),"\n",(0,i.jsx)(n.p,{children:"Set the the attributes of a object. Doesn't remove the current ones, but can overwrite those."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.setAttributes({someAttribute: someValue}, (err) => {\n  // attribute was set\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"uploadattributetype-bufferstream-callback",children:(0,i.jsx)(n.code,{children:".uploadAttribute(type, [buffer|stream], [callback])"})}),"\n",(0,i.jsx)(n.p,{children:"Upload a thumbnail or preview image to the existent file. Fails if the node is a folder."}),"\n",(0,i.jsxs)(n.p,{children:["The argument ",(0,i.jsx)(n.code,{children:"type"})," can be a string (",(0,i.jsx)(n.code,{children:"thumbnail"})," or ",(0,i.jsx)(n.code,{children:"preview"}),") or a integer (",(0,i.jsx)(n.code,{children:"0"})," and ",(0,i.jsx)(n.code,{children:"1"}),")."]}),"\n",(0,i.jsx)(n.h4,{id:"renamenewfilename-callback",children:(0,i.jsx)(n.code,{children:".rename(newFileName, callback)"})}),"\n",(0,i.jsx)(n.p,{children:"Rename a file."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"file.rename('hello-world.txt', (err) => {\n  // file was renamed\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"setlabellabel-callback",children:(0,i.jsx)(n.code,{children:".setLabel(label, callback)"})}),"\n",(0,i.jsxs)(n.p,{children:["Set file's label, where ",(0,i.jsx)(n.code,{children:"label"})," can be a number between 0 and 7 or a valid label color the following: 'red', 'orange', 'yellow', 'green', 'blue', 'purple' and 'grey'."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.setLabel('red', (err) => {\n  // file label is red now\n})\n"})}),"\n",(0,i.jsx)(n.h4,{id:"setfavoriteisfavorite-callback",children:(0,i.jsx)(n.code,{children:".setFavorite(isFavorite, callback)"})}),"\n",(0,i.jsxs)(n.p,{children:["Set file as favorite is ",(0,i.jsx)(n.code,{children:"isFavorite"})," is ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"file.setFavorite(true, (err) => {\n  // file is now a favorite\n})\n"})}),"\n",(0,i.jsx)(n.h3,{id:"events-1",children:"Events"}),"\n",(0,i.jsx)(n.p,{children:"Same events as for Storage objects. Only trigger for a specific file."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"move"})," - File was moved to another dir. Parameters: olddir."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"delete"})," - File was deleted."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"update"})," - File metadata was changed."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"low-level-functions",children:"Low level functions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"encrypt"})," and ",(0,i.jsx)(n.code,{children:"decrypt"})," are lower level transform streams. They accept a key as input and transform file data and outputs encrypted data and vice versa. They also handle MAC verification / generation."]}),"\n",(0,i.jsxs)(n.p,{children:["The key for ",(0,i.jsx)(n.code,{children:"encrypt"})," must be 192 bit. When the stream ends it a full 256 bit key will be available via the ",(0,i.jsx)(n.code,{children:".key"})," property. The additional 64 bit come from the MAC."]}),"\n",(0,i.jsxs)(n.p,{children:["The key for the ",(0,i.jsx)(n.code,{children:"decrypt"})," function must be the same 256 bit key returned during encryption."]}),"\n",(0,i.jsx)(n.p,{children:"Those functions are almost never used and are only exported in order to allow backyards compatibility."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},9365:(e,n,l)=>{l.d(n,{A:()=>t});l(6540);var i=l(4164);const s={tabItem:"tabItem_Ymn6"};var r=l(4848);function t(e){let{children:n,hidden:l,className:t}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,t),hidden:l,children:n})}},1470:(e,n,l)=>{l.d(n,{A:()=>w});var i=l(6540),s=l(4164),r=l(3104),t=l(6347),o=l(205),a=l(7485),d=l(1682),c=l(9466);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:l}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:l,attributes:i,default:s}}=e;return{value:n,label:l,attributes:i,default:s}}))}(l);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,l])}function j(e){let{value:n,tabValues:l}=e;return l.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:l}=e;const s=(0,t.W6)(),r=function(e){let{queryString:n=!1,groupId:l}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!l)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return l??null}({queryString:n,groupId:l});return[(0,a.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function p(e){const{defaultValue:n,queryString:l=!1,groupId:s}=e,r=u(e),[t,a]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:l}=e;if(0===l.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!j({value:n,tabValues:l}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${l.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=l.find((e=>e.default))??l[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r}))),[d,h]=x({queryString:l,groupId:s}),[p,f]=function(e){let{groupId:n}=e;const l=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,r]=(0,c.Dv)(l);return[s,(0,i.useCallback)((e=>{l&&r.set(e)}),[l,r])]}({groupId:s}),m=(()=>{const e=d??p;return j({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{m&&a(m)}),[m]);return{selectedValue:t,selectValue:(0,i.useCallback)((e=>{if(!j({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);a(e),h(e),f(e)}),[h,f,r]),tabValues:r}}var f=l(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=l(4848);function g(e){let{className:n,block:l,selectedValue:i,selectValue:t,tabValues:o}=e;const a=[],{blockElementScrollPositionUntilNextRender:d}=(0,r.a_)(),c=e=>{const n=e.currentTarget,l=a.indexOf(n),s=o[l].value;s!==i&&(d(n),t(s))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const l=a.indexOf(e.currentTarget)+1;n=a[l]??a[0];break}case"ArrowLeft":{const l=a.indexOf(e.currentTarget)-1;n=a[l]??a[a.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":l},n),children:o.map((e=>{let{value:n,label:l,attributes:r}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>a.push(e),onKeyDown:h,onClick:c,...r,className:(0,s.A)("tabs__item",m.tabItem,r?.className,{"tabs__item--active":i===n}),children:l??n},n)}))})}function v(e){let{lazy:n,children:l,selectedValue:s}=e;const r=(Array.isArray(l)?l:[l]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===s));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function y(e){const n=p(e);return(0,b.jsxs)("div",{className:(0,s.A)("tabs-container",m.tabList),children:[(0,b.jsx)(g,{...n,...e}),(0,b.jsx)(v,{...n,...e})]})}function w(e){const n=(0,f.A)();return(0,b.jsx)(y,{...e,children:h(e.children)},String(n))}},2267:(e,n,l)=>{l.d(n,{A:()=>c});l(6540);var i=l(1432),s=l(1470),r=l(9365);l(4586);const t=["Node ESM","Node CJS","Browser","Deno"];function o(e,n){let l=!0,i=!1,s=!1;return e.split("\n").filter((e=>{const r=e.trim();if("// node2deno end"===r)l=!0,i=!1;else if("// node2deno else"===r)l=!i;else if(r.startsWith("// node2deno else if: ")){if(!i){const e=r.slice(22).trim().split(" ");l=e.includes(n),l&&(i=!0)}}else if(r.startsWith("// node2deno single: ")){const e=r.slice(21).trim().split(" ");l=e.includes(n),s=!0}else if(r.startsWith("// node2deno: ")){const e=r.slice(14).trim().split(" ");l=e.includes(n),l&&(i=!0)}else{if(l)return s=!1,!0;s&&(s=!1,l=!0)}return!1})).join("\n")}const a=[e=>o(e,"node"),e=>((e=o(e,"node").replace(/import (.+?) from 'megajs'/g,"const $1 = require('megajs')")).includes("await ")&&(e=e.replace(/^(?!import|$)/gm,"  ").replace(/^\s*$/m,"\n// Node doesn't support top-level await when using CJS\n;(async function () {").replace(/\n*$/,"\n}()).catch(error => {\n  console.error(error)\n  process.exit(1)\n})\n")),e),e=>o(e,"browser").replace(/import (.+?) from 'megajs'/g,"import $1 from 'https://cdn.skypack.dev/megajs'"),e=>o(e,"deno").replace(/import (.+?) from 'megajs'/g,"import $1 from 'npm:megajs'")];var d=l(4848);function c(e){null==e.version||1===Number(e.version)||e.version;return(0,d.jsx)("div",{children:(0,d.jsx)(s.A,{groupId:"node2deno",className:"margin-bottom--sm",children:t.map(((n,l)=>(0,d.jsx)(r.A,{value:l,label:n,onClick:()=>setMode(l),children:(0,d.jsx)(i.A,{language:e.language,children:a[l](e.code)})},"+"+l)))})})}},8453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>o});var i=l(6540);const s={},r=i.createContext(s);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);